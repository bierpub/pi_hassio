- id: sun_room_camera_motion
  alias: "Sun Room Camera Motion"
  initial_state: true
  trigger:
    platform: state
    entity_id: 
      - binary_sensor.amcrest_camera_motion_detected
    to: 'on'
  condition:
  - condition: and
    conditions:
      - condition: template
        value_template: "{{ states('person.jeff') != 'home' }}"
      - condition: template
        value_template: "{{ states('person.rachel') != 'home' }}"
  action:
    - service: camera.snapshot
      data:
        entity_id: camera.amcrest_camera
        filename: /config/www/camera/sunroom_capture.jpg
    - delay:
        seconds: 3
    - service: notify.mypushbullet
      data:
        title: 'Motion Detected in Sum Room'
        message: 'Motion Detected in Sun Room at {{now().strftime("%H:%M:%S")}}'
        data:
          file: /config/www/camera/sunroom_capture.jpg

- id: cooper_door_motion
  alias: "Cooper Door Motion"
  initial_state: true
  trigger:
    platform: state
    entity_id: binary_sensor.hikrearcam_field_detection
    to: 'on'
  condition:
    condition: state
    entity_id: input_boolean.cooper_door_button
    state: 'on'
  action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.cooper_door_button
    - service: tts.google_say
      entity_id: media_player.kitchen_home
      data:
        message: 'Cooper is at the back door!'
    - service: notify.ios_rachel_iphone
      data:
        title: "Back Door Motion"
        message: 'Cooper is at the Back Door at {{now().strftime("%H:%M:%S")}}'
    - service: notify.mypushbullet
      data:
        title: "Back Door Motion"
        message: "Cooper is at the Back Door!"
    - service: notify.livingroomtv
      data:
        message: 'Cooper is at the back door!'

- id: driveway_motion
  alias: "Driveway Motion"
  initial_state: true
  trigger:
    platform: state
    entity_id: binary_sensor.hikdriveway_field_detection
    to: 'on'
  condition:
    condition: state
    entity_id: input_boolean.driveway_button
    state: 'on'
  action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.driveway_button
    - service: tts.google_say
      entity_id: media_player.kitchen_home
      data:
        message: 'Someone is in the Driveway!'
    - service: notify.livingroomtv
      data:
        message: 'Someone is in the Driveway!!'
    - service: camera.snapshot
      data:
        entity_id: camera.hikdriveway
        filename: /config/www/camera/driveway_capture.jpg
    - delay:
        seconds: 2
    - service: notify.ios_rachel_iphone
      data:
        title: "Driveway Motion"
        message: 'Motion in the Driveway at {{now().strftime("%H:%M:%S")}}'
        data:
          file: /config/www/camera/driveway_capture.jpg
    - service: notify.mypushbullet
      data:
        title: "Driveway Motion"
        message: "Motion in the Driveway!"
        data:
          file: /config/www/camera/driveway_capture.jpg

